# 🤖 DeepSeek AI 智能选股 - 快速开始

## ✅ 已完成

您的智能选股系统现在**全部使用 DeepSeek AI** 进行深度分析！

---

## 🚀 5分钟快速上手

### 第1步：启动系统（已完成）

系统正在后台启动中...（约15-20秒）

检查状态：
```bash
# 查看进程
lsof -ti :8000  # 后端
lsof -ti :5173  # 前端
```

---

### 第2步：配置 DeepSeek API Key ⚙️

**重要**：必须先配置 API Key，否则系统会回退到纯量化模式

1. 打开浏览器：
   ```
   http://localhost:5173
   ```

2. 进入「基础配置」Tab

3. 添加以下配置：
   ```
   DEEPSEEK_API_KEY = sk-xxxxxxxxxxxxxxxx
   ```
   
   如果您没有 API Key：
   - 访问 https://platform.deepseek.com
   - 注册账号
   - 创建 API Key

4. 点击「保存」

---

### 第3步：添加股票 📊

1. 切换到「🎯 智能选股」Tab

2. 点击「➕ 添加股票」

3. 选择「批量添加」

4. 粘贴以下测试股票（推荐）：
   ```
   AAPL.US
   MSFT.US
   GOOGL.US
   AMZN.US
   META.US
   ```

5. 选择池类型：
   - 「添加到多头池」：适合看好的股票
   - 「添加到空头池」：适合看空的股票

6. 点击「添加」

---

### 第4步：触发 AI 分析 🤖

1. 点击「🔄 分析全部」

2. 观察实时日志：
   ```
   开始分析 5 只股票...
   正在分析: AAPL.US
   📥 同步K线: AAPL.US - 200条
   🤖 DeepSeek分析: AAPL.US          ← AI分析中！
   🤖 AI决策: AAPL.US - BUY (信心度: 0.82)  ← AI决策！
   完成: AAPL.US (1/5)
   ...
   ✅ 分析完成: 成功 5, 跳过 0, 失败 0
   ```

3. 预计耗时：
   - 5只股票：约30秒 - 1分钟
   - 10只股票：约1 - 2分钟
   - 20只股票：约2 - 4分钟

---

### 第5步：查看 AI 分析结果 📈

分析完成后，查看股票卡片：

1. **推荐度排序**：
   - 系统自动按推荐度排序（90+ = 强烈推荐）

2. **点击「详情」展开**：
   - 📊 量化评分（5维度）
   - 🤖 AI 决策（BUY/SELL/HOLD）
   - 💬 AI 推理过程（详细解释）
   - 📈 技术指标

3. **示例 - AAPL.US**：
   ```
   ┌─────────────────────────────────────────┐
   │ 🎯 AAPL.US                              │
   ├─────────────────────────────────────────┤
   │ 推荐度: 85 分（强烈推荐）               │
   │ 量化评分: 78 分（B级）                  │
   ├─────────────────────────────────────────┤
   │ 🤖 AI 决策: BUY                         │
   │ 💯 AI 信心度: 82%                       │
   ├─────────────────────────────────────────┤
   │ 💬 AI 推理:                             │
   │ 该股票呈现明显的上升趋势，综合评分     │
   │ 78分（B级）。                           │
   │                                         │
   │ 技术面分析：                            │
   │ - 趋势维度(85分)：MA5 > MA20，金叉形成 │
   │ - 动量维度(72分)：RSI=58.3，健康上升   │
   │ - 成交量维度(68分)：量比=1.2，有量能   │
   │ - 波动率维度(75分)：布林带中轨，温和   │
   │ - 形态维度(80分)：锤子线，底部反转信号 │
   │                                         │
   │ MACD分析：                              │
   │ DIF=1.2, DEA=0.8, MACD柱=0.4（正值）   │
   │ 零轴之上，多头趋势强劲                  │
   │                                         │
   │ 综合判断：                              │
   │ 建议在当前价位附近买入。                │
   │ 止损位：147.5（MA20下方）               │
   │ 止盈位：158.0（前期高点）               │
   └─────────────────────────────────────────┘
   ```

---

## 🎯 核心特性

### 1. DeepSeek AI 深度分析 🤖

**输入给 AI**：
- K线数据（100条）
- 技术指标（MA、RSI、MACD、布林带等）
- 量化评分（5维度打分）
- 分析偏好（buy_focus / sell_focus）

**AI 输出**：
- 交易动作（BUY / SELL / HOLD）
- 信心度（0.0 - 1.0）
- 详细推理过程（为什么这么决策）
- 技术分析解读
- 风险提示

---

### 2. 智能容错 ✅

**场景1：未配置 API Key**
```
⚠️ 未配置DeepSeek API，使用纯量化评分: AAPL.US
```
系统自动回退到纯量化模式

**场景2：股票代码无效**
```
⏭️ 跳过: INVALID.US - K线数据不足(0条)
```
自动跳过，不影响其他股票

**场景3：API 调用失败**
```
❌ DeepSeek API调用失败: 超时
```
记录错误，继续分析其他股票

---

### 3. 实时进度推送 📡

使用 Server-Sent Events (SSE) 实时推送：
- 当前分析股票
- 完成进度（1/5, 2/5, ...）
- K线同步状态
- AI分析状态
- 成功/跳过/失败统计

---

### 4. 多维度评分 📊

**量化评分**（0-100分）：
- 趋势维度（35分）
- 动量维度（25分）
- 成交量维度（15分）
- 波动率维度（15分）
- K线形态（10分）

**推荐度算法**：
```python
推荐度 = 量化评分 * 0.4 + AI信心度 * 60 + 信号强度 * 20

if pool_type == 'LONG':
    if ai_action == 'BUY':
        推荐度 += 15  # 加分
    elif ai_action == 'SELL':
        推荐度 -= 20  # 扣分
```

---

## ⚠️ 注意事项

### 1. API 配额

- DeepSeek API 有调用限制
- 建议小批量测试（先5-10只）
- 避免频繁触发分析

### 2. 分析速度

- AI 分析比纯量化慢 10-20 倍
- 23只股票约需要 2-5 分钟
- 请耐心等待，不要重复点击

### 3. 结果解读

- AI 推理仅供参考，不构成投资建议
- 结合自己的分析做决策
- 注意风险控制

---

## 🔧 故障排查

### 问题1：分析一直卡住

**检查后端日志**：
```bash
tail -f logs/backend.log
```

**查找**：
- `🤖 DeepSeek分析: XXX.US` （正在分析哪只）
- `❌` （是否有错误）

**解决**：
- 等待 1-2 分钟（AI分析需要时间）
- 检查网络连接
- 检查 API Key 是否正确

---

### 问题2：所有股票都显示"纯量化评分"

**原因**：未配置 DeepSeek API Key

**解决**：
1. 进入「基础配置」
2. 添加 `DEEPSEEK_API_KEY`
3. 保存
4. 重新触发分析

---

### 问题3：部分股票跳过

**原因**：股票代码无效或 K线数据不足

**解决**：
- 这是正常行为
- 系统会自动跳过
- 删除无效股票即可
- 使用常见美股（AAPL、MSFT等）

---

## 📊 对比：纯量化 vs AI 模式

| 维度 | 纯量化 | DeepSeek AI（当前） |
|-----|-------|-------------------|
| 速度 | ⚡⚡⚡ 15秒/20只 | ⚡ 2-4分钟/20只 |
| 成本 | 💰 免费 | 💰💰 需要API |
| 准确度 | ✅ 较好 | ✅✅ 更优 |
| 推理 | ❌ 无 | ✅ 详细解释 |
| 适用 | 快速筛选 | 深度分析 |

---

## 🎉 开始使用

### 检查后端状态
```bash
curl http://localhost:8000/health
```

应该返回：
```json
{"status":"healthy"}
```

---

### 访问前端
```
http://localhost:5173
```

---

### 立即体验 AI 选股！

1. ✅ 配置 API Key
2. ✅ 添加 5 只测试股票
3. ✅ 触发 AI 分析
4. ✅ 查看 AI 推理
5. ✅ 选择最佳标的

---

## 📚 更多文档

- **详细说明**：[DEEPSEEK_AI_MODE_ENABLED.md](DEEPSEEK_AI_MODE_ENABLED.md)
- **系统架构**：[docs/STOCK_PICKER_DESIGN.md](docs/STOCK_PICKER_DESIGN.md)
- **AI 提示词优化**：[AI_TRADING_PROMPT_OPTIMIZATION.md](AI_TRADING_PROMPT_OPTIMIZATION.md)
- **评分系统**：[AI_SCORING_SYSTEM.md](AI_SCORING_SYSTEM.md)
- **完整总结**：[COMPLETE_SUMMARY_OCT24.md](COMPLETE_SUMMARY_OCT24.md)

---

**祝您选股成功！** 🎯📈

有任何问题随时反馈！











