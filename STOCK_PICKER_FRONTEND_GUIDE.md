# 智能选股前端使用指南

## 📝 概述

智能选股前端为您提供了一个直观、易用的界面，帮助您管理股票池、触发AI分析、查看推荐结果。

## 🎨 界面布局

### 主页面结构

```
┌─────────────────────────────────────────────────────────┐
│  📊 智能选股分析                    [🔄 分析全部]        │
├─────────────────────┬───────────────────────────────────┤
│   📈 做多股票池      │      📉 做空股票池                 │
│   ┌──────────┐      │      ┌──────────┐                │
│   │ 股票卡片  │      │      │ 股票卡片  │                │
│   │ 评分详情  │      │      │ 评分详情  │                │
│   │ AI推荐   │      │      │ AI推荐   │                │
│   └──────────┘      │      └──────────┘                │
│                     │                                   │
│   [➕ 添加] [🔍分析] │      [➕ 添加] [🔍分析]            │
└─────────────────────┴───────────────────────────────────┘
│                   📈 统计信息                            │
└─────────────────────────────────────────────────────────┘
```

## 🚀 功能详解

### 1. 添加股票

**单个添加**：
1. 点击「➕ 添加」按钮
2. 输入股票代码（如：`AAPL.US`）
3. 可选：输入股票名称和添加理由
4. 点击「确定添加」

**批量导入**（使用后端脚本）：
```bash
# 修改 import_stocks.py 中的股票列表
python import_stocks.py
```

**支持的股票代码格式**：
- 美股：`AAPL.US`、`TSLA.US`
- 港股：`00700.HK`、`09988.HK`
- A股：`000001.SZ`、`600000.SH`

### 2. 触发分析

**全部分析**：
- 点击顶部的「🔄 分析全部」按钮
- 系统会分析所有激活的股票（做多池 + 做空池）
- 大约需要 2-5 分钟（取决于股票数量）

**单池分析**：
- 点击做多池或做空池的「🔍 分析」按钮
- 仅分析该池中的股票

**分析内容**：
- 获取最新K线数据（200根）
- 计算技术指标（MA、RSI、MACD等）
- 识别K线形态（锤子线、晨星等）
- AI深度分析与推理
- 计算量化评分和推荐度

### 3. 查看结果

#### 股票卡片信息

```
┌────────────────────────────────────┐
│ #1 AAPL.US               🟢 A级    │
│ Apple Inc.                    🗑️   │
├────────────────────────────────────┤
│ $175.50         ↑ 2.35%           │
├────────────────────────────────────┤
│ 量化评分: 85.2/100                 │
│ 推荐度:   92.5/100                 │
│ 信心度:   85%                      │
├────────────────────────────────────┤
│ 💡 推荐理由：                       │
│ 高分量化 + 高信心AI + 多个买入信号  │
├────────────────────────────────────┤
│ ✓ 趋势向上  ✓ MACD金叉  ✓ 突破支撑  │
├────────────────────────────────────┤
│          ▼ 查看详情                │
└────────────────────────────────────┘
```

#### 展开后详细信息

点击「▼ 查看详情」后，会显示：

**评分细节**（5维度柱状图）：
- **趋势** (0-30分): 反映短中长期趋势
- **动量** (0-25分): RSI、MACD等动量指标
- **量能** (0-15分): 成交量变化
- **波动** (0-15分): 价格波动性
- **形态** (0-15分): K线形态识别

**AI分析理由**：
- AI给出的具体推理过程
- 多个维度的分析依据

**全部信号列表**：
- 所有识别到的技术信号

### 4. 评分系统

#### 量化评分（0-100分）

| 评级 | 分数范围 | 说明 |
|------|---------|------|
| 🟢 A | 80-100 | 极佳，多项指标优秀 |
| 🟡 B | 65-79  | 良好，部分指标突出 |
| 🟠 C | 50-64  | 中等，指标一般 |
| 🔴 D | 0-49   | 较差，风险较高 |

#### 推荐度（0-100分）

综合考虑：
- **量化评分**（权重 40%）
- **AI信心度**（权重 35%）
- **信号强度**（权重 25%）

**推荐阈值**：
- ≥ 80分：强烈推荐 ⭐⭐⭐
- 70-79分：推荐 ⭐⭐
- 65-69分：可考虑 ⭐
- < 65分：不推荐 ✗

### 5. 删除股票

1. 点击股票卡片右上角的「🗑️」图标
2. 确认删除
3. 股票将从池中移除

## 📊 统计信息

页面底部展示：
- **做多池**：平均评分、股票数量
- **做空池**：平均评分、股票数量

帮助您快速了解两个池的整体质量。

## 🎯 使用场景

### 场景1：每日选股

1. **早盘前**：添加关注的股票到池中
2. **开盘后**：触发分析，获取最新数据
3. **查看推荐**：按推荐度排序，优先关注高分股票
4. **展开详情**：深入了解AI的推理依据
5. **执行交易**：结合您的交易策略执行

### 场景2：筛选优质标的

1. 批量导入一批股票（如板块龙头）
2. 触发全部分析
3. 查看评级分布
4. 删除D级、C级股票
5. 重点关注A级、B级股票

### 场景3：多空策略

1. **做多池**：选择基本面好、技术面强的股票
2. **做空池**：选择弱势股、高估股
3. 分别分析两池
4. 按推荐度执行多空操作

### 场景4：持续监控

1. 每天定时触发分析（可用后端脚本实现自动化）
2. 观察评分变化趋势
3. 及时调整持仓
4. 移除评分下降的股票

## ⚙️ 配置选项

当前配置位于后端 `stock_picker_config` 表：

| 配置项 | 默认值 | 说明 |
|--------|--------|------|
| `max_pool_size` | 20 | 每个池的最大股票数 |
| `min_score_to_recommend` | 65 | 最低推荐分数 |
| `cache_duration` | 300秒 | 分析结果缓存时间 |
| `auto_refresh_enabled` | false | 是否自动刷新 |
| `auto_refresh_interval` | 300秒 | 自动刷新间隔 |

## 🔧 高级用法

### 自动化分析

创建定时任务（crontab 或 Task Scheduler）：

```bash
# 每小时执行一次分析
0 * * * * cd /path/to/longbridge && python analyze_stocks.py
```

### API直接调用

如果您想自己编写脚本：

```python
import requests

API_BASE = "http://localhost:8000"

# 触发分析
response = requests.post(f"{API_BASE}/api/stock-picker/analyze", json={
    "pool_type": "LONG",  # 或 "SHORT"，或不传（分析全部）
    "force_refresh": True
})

# 获取结果
response = requests.get(f"{API_BASE}/api/stock-picker/analysis")
data = response.json()

for stock in data['long_analysis']:
    print(f"{stock['symbol']}: 推荐度 {stock['recommendation_score']}")
```

## 📱 响应式设计

- **桌面**：双栏布局，并排显示做多池和做空池
- **平板**：双栏布局，但卡片会稍微压缩
- **移动**：单栏布局，垂直堆叠

## 🎨 颜色说明

- 🟢 **绿色**：做多、上涨、A级、推荐
- 🔴 **红色**：做空、下跌、D级、不推荐
- 🟡 **黄色**：B级、中性
- 🟠 **橙色**：C级、警告
- 🔵 **蓝色**：信号、推荐理由

## 🐛 常见问题

### Q1: 分析失败怎么办？

**原因**：
- 股票代码格式错误
- 无法获取K线数据
- DeepSeek API 额度不足

**解决**：
- 检查股票代码格式（需带 `.US`/`.HK` 后缀）
- 查看后端日志：`tail -f logs/backend.log`
- 检查 API 配置和额度

### Q2: 评分很低但我觉得股票不错？

**解释**：
- 量化评分是纯技术面分析
- 不考虑基本面、消息面
- 建议结合您的判断使用

### Q3: AI分析和我的判断不一致？

**说明**：
- AI基于历史数据和技术指标
- 不保证未来表现
- 仅作参考，最终决策由您做出

### Q4: 可以添加超过20只股票吗？

**答案**：
- 默认限制是20只/池
- 可以修改 `stock_picker_config` 表中的 `max_pool_size`
- 但太多股票会导致分析时间过长

## 🔗 相关文档

- [设计文档](./docs/STOCK_PICKER_DESIGN.md) - 详细的系统设计
- [快速开始](./docs/STOCK_PICKER_QUICK_START.md) - 核心算法说明
- [后端API](./backend/app/routers/stock_picker.py) - API接口文档
- [使用说明](./STOCK_PICKER_USAGE.md) - 后端使用说明

## 💡 最佳实践

1. **不要盲目相信评分**：始终结合您的交易经验
2. **定期更新股票池**：移除表现不佳的股票，添加新机会
3. **关注推荐理由**：理解AI的推理逻辑，而不只看分数
4. **控制风险**：即使是A级股票也可能下跌
5. **持续监控**：定期重新分析，观察评分变化

## 🎉 开始使用

1. 启动后端服务：`./start.sh`
2. 打开前端：`http://localhost:5173`
3. 点击「🎯 智能选股」标签
4. 添加您关注的股票
5. 点击「🔄 分析全部」
6. 查看推荐结果，开始交易！

---

**祝您交易顺利！📈**











