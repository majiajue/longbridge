# AI 交易量化评分系统

## 📊 系统概述

为了让AI决策更加透明、可解释和可调优，我们引入了多维度量化评分系统。该系统在AI分析前先对技术指标进行量化打分（0-100分），然后将评分结果作为参考提供给AI，帮助AI做出更准确的决策。

## 🎯 评分维度与权重

评分系统包含5个维度，总分100分：

### 1. 趋势评分（30分） - 最重要

**评分依据**：
- **MA排列（15分）**
  - MA5 > MA20 > MA60（多头排列）: 15分
  - MA5 > MA20: 12分
  - MA5 < MA20（空头排列）: 3分
  - 均线粘合: 8分

- **价格vs MA20位置（15分）**
  - 价格 > MA20 +5%: 15分（强势）
  - 价格 > MA20 0-5%: 12分（在上方）
  - 价格接近MA20（±3%内）: 8分（中性）
  - 价格 < MA20 -3%到-5%: 5分（略弱）
  - 价格 < MA20 -5%以上: 2分（明显弱势）

**检测信号**：
- "多头排列(MA5>MA20>MA60)"
- "短期趋势向上(MA5>MA20)"
- "价格强势(+X%)"
- "价格在MA20上方(+X%)"

### 2. 动量评分（25分） - 次重要

**评分依据**：
- **RSI评分（12分）**
  - 40-60（健康区间）: 12分
  - 30-40（超卖反弹区）: 10分
  - 60-70（偏强未超买）: 9分
  - 25-30（深度超卖）: 8分
  - 70-80（超买区）: 5分
  - 其他极端值: 3分

- **MACD评分（13分）**
  - MACD > Signal 且柱状图 > 0.1: 13分（强势金叉）
  - MACD > Signal 且柱状图 > 0: 10分（金叉）
  - MACD > Signal 但柱状图 < 0: 7分（收敛向上）
  - MACD < Signal 且柱状图 < 0: 3分（死叉）
  - MACD < Signal 但柱状图 > 0: 5分（收敛向下）

**检测信号**：
- "RSI健康(50.5)"
- "RSI超卖反弹区(35.2)"
- "MACD强势金叉"
- "MACD金叉"
- "MACD收敛向上"

### 3. 量能评分（15分）

**评分依据**：
- 量比 ≥ 1.5倍: 15分（明显放量）
- 量比 ≥ 1.3倍: 12分（适度放量）
- 量比 ≥ 1.0倍: 9分（成交量正常）
- 量比 ≥ 0.8倍: 6分（略微缩量）
- 量比 < 0.8倍: 3分（明显缩量）

**检测信号**：
- "明显放量(1.8x)"
- "适度放量(1.4x)"
- "成交量正常"
- "明显缩量(0.6x)"

### 4. 波动评分（15分） - 布林带位置

**评分依据**：
计算价格在布林带中的位置（0=下轨，0.5=中轨，1=上轨）
- 位置在 0.3-0.6（中轨附近）: 15分（安全区域）
- 位置在 0.15-0.3（接近下轨）: 13分（反弹机会）
- 位置 < 0.15（触及下轨）: 12分（超跌）
- 位置在 0.6-0.8（中上部）: 10分（偏上）
- 位置 > 0.8（接近上轨）: 5分（追高风险）

**检测信号**：
- "布林带中轨(安全)"
- "接近布林下轨(反弹)"
- "触及布林下轨(超跌)"
- "接近布林上轨(追高)"

### 5. K线形态评分（15分）

**评分依据**：
分析最近3根K线组合
- **阳线基础分**: 8分
- **阴线基础分**: 3分

**看涨形态加分**：
- 锤子线（下影线 > 50%总区间）: +7分
- 红三兵（连续3根阳线）: +7分
- 多方炮（阳-阴-阳）: +6分
- 普通阳线: +2分

**看跌形态减分**：
- 吊颈线（上影线 > 50%总区间）: -2分
- 黑三兵（连续3根阴线）: -3分

**检测信号**：
- "锤子线形态(看涨)"
- "红三兵(看涨)"
- "多方炮形态(看涨)"
- "吊颈线形态(看跌)"
- "黑三兵(看跌)"

---

## 📈 评分解读

### 总分与评级对应

| 总分区间 | 评级 | 含义 | 建议操作 |
|---------|------|------|---------|
| 80-100 | A | 强烈推荐，多因子共振 | 积极买入（信心度0.85+）|
| 65-79 | B | 推荐交易，信号明确 | 推荐买入（信心度0.75-0.85）|
| 50-64 | C | 中性，可观望 | 谨慎考虑（信心度0.65-0.75）|
| 0-49 | D | 不推荐，信号弱 | 建议观望（信心度<0.65）|

### 场景调整

在 `buy_focus` 场景下，如果同时满足：
- 趋势评分 ≥ 20分
- 动量评分 ≥ 18分

则额外加5分，并添加"多因子共振(加分)"信号。

---

## 🔍 评分示例

### 示例1：优质买入机会（A级，85分）

```python
{
  "total": 85.0,
  "grade": "A",
  "breakdown": {
    "trend": 27,      # MA5>MA20>MA60，价格在MA20上方+3%
    "momentum": 22,   # RSI=52（健康），MACD强势金叉
    "volume": 15,     # 量比1.8x，明显放量
    "volatility": 13, # 价格接近布林下轨，有反弹空间
    "pattern": 13     # 阳线+锤子线形态
  },
  "signals": [
    "多头排列(MA5>MA20>MA60)",
    "价格在MA20上方(+3.2%)",
    "RSI健康(52.0)",
    "MACD强势金叉",
    "明显放量(1.8x)",
    "接近布林下轨(反弹)",
    "锤子线形态(看涨)",
    "多因子共振(加分)"
  ]
}
```

**AI决策建议**：
- Action: BUY
- Confidence: 0.88
- 理由：A级评分，多因子共振，锤子线反转信号明确

---

### 示例2：中性观望（C级，56分）

```python
{
  "total": 56.0,
  "grade": "C",
  "breakdown": {
    "trend": 15,      # MA5>MA20但价格略低于MA20
    "momentum": 17,   # RSI=48（中性），MACD即将金叉
    "volume": 9,      # 量比1.1x，正常
    "volatility": 10, # 布林带中上部
    "pattern": 10     # 普通阳线
  },
  "signals": [
    "短期趋势向上(MA5>MA20)",
    "价格接近MA20(-1.5%)",
    "RSI健康(48.0)",
    "MACD收敛向上",
    "成交量正常",
    "布林带中上部"
  ]
}
```

**AI决策建议**：
- Action: HOLD
- Confidence: 0.62
- 理由：C级评分，信号不够强烈，建议观望

---

### 示例3：弱势避免（D级，38分）

```python
{
  "total": 38.0,
  "grade": "D",
  "breakdown": {
    "trend": 8,       # MA5<MA20，空头排列
    "momentum": 8,    # RSI=68（偏高），MACD死叉
    "volume": 6,      # 量比0.9x，略微缩量
    "volatility": 10, # 布林带中部
    "pattern": 1      # 阴线+吊颈线
  },
  "signals": [
    "短期趋势向下(MA5<MA20)",
    "价格接近MA20(-2.1%)",
    "RSI偏强(68.0)",
    "MACD死叉",
    "略微缩量",
    "吊颈线形态(看跌)"
  ]
}
```

**AI决策建议**：
- Action: HOLD
- Confidence: 0.45
- 理由：D级评分，多个看跌信号，不适合买入

---

## 🎨 前端展示建议

### 评分卡片

```
┌────────────────────────────────────┐
│ 📊 量化评分：85/100 (A级)          │
├────────────────────────────────────┤
│ ▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓░░░  趋势 27/30  │
│ ▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓░░  动量 22/25  │
│ ▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓  量能 15/15  │
│ ▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓░░░  波动 13/15  │
│ ▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓░░░░░  形态 13/15  │
├────────────────────────────────────┤
│ ✓ 多头排列(MA5>MA20>MA60)         │
│ ✓ 价格在MA20上方(+3.2%)            │
│ ✓ MACD强势金叉                     │
│ ✓ 明显放量(1.8x)                   │
│ ✓ 锤子线形态(看涨)                 │
└────────────────────────────────────┘
```

### 颜色方案

- **A级（80+）**: 深绿色 `#22c55e`
- **B级（65-79）**: 浅绿色 `#84cc16`
- **C级（50-64）**: 黄色 `#eab308`
- **D级（<50）**: 红色 `#ef4444`

---

## 💡 评分系统优势

### 1. **透明性**
- 每个维度的评分标准清晰
- 可以明确知道哪些指标贡献了分数
- 易于解释为什么做出某个决策

### 2. **可调优性**
- 可以轻松调整各维度权重
- 可以修改评分标准以适应不同市场
- 可以根据回测结果优化评分算法

### 3. **一致性**
- 相同的市场情况总是得到相同的评分
- 避免了纯AI决策的随机性
- 为AI提供了稳定的参考基准

### 4. **教育性**
- 用户可以学习哪些指标重要
- 理解不同维度对交易决策的影响
- 提高量化交易的认知水平

### 5. **辅助AI**
- AI在评分基础上做最终决策
- 结合了量化评分和AI判断的优势
- 评分≠决策，AI有最终决定权

---

## ⚙️ 参数调优建议

### 权重调整

如果发现某个维度重要性被高估/低估，可以调整：

```python
# 当前权重
趋势: 30分
动量: 25分
量能: 15分
波动: 15分
形态: 15分

# 保守型（更重视趋势）
趋势: 35分
动量: 25分
量能: 15分
波动: 15分
形态: 10分

# 激进型（更重视形态和量能）
趋势: 25分
动量: 20分
量能: 20分
波动: 15分
形态: 20分
```

### 阈值调整

根据回测结果调整评级阈值：

```python
# 当前阈值
A级: 80+
B级: 65-79
C级: 50-64
D级: <50

# 更保守（提高标准）
A级: 85+
B级: 70-84
C级: 55-69
D级: <55

# 更激进（降低标准）
A级: 75+
B级: 60-74
C级: 45-59
D级: <45
```

---

## 📊 评分与信心度的关系

量化评分为AI提供参考，但AI可以根据更复杂的因素调整信心度：

| 评分区间 | 建议信心度 | AI可调整范围 | 最终决策 |
|---------|-----------|------------|---------|
| 80+ (A) | 0.85-0.95 | ±0.05 | 强烈推荐BUY |
| 65-79 (B) | 0.75-0.85 | ±0.08 | 推荐BUY |
| 50-64 (C) | 0.65-0.75 | ±0.10 | 可能BUY/HOLD |
| <50 (D) | 0.45-0.60 | ±0.10 | 倾向HOLD |

**示例**：
- 评分75（B级）→ 建议信心度0.78 → AI识别到额外看涨形态 → 最终信心度0.83
- 评分52（C级）→ 建议信心度0.68 → AI发现信号矛盾 → 最终信心度0.58 → HOLD

---

## 🚀 未来优化方向

1. **机器学习优化权重**
   - 根据历史交易数据自动调整各维度权重
   - 找出最优评分公式

2. **市场环境自适应**
   - 牛市/熊市/震荡市使用不同权重
   - 根据波动率动态调整阈值

3. **多时间周期综合**
   - 结合日线、小时线、分钟线评分
   - 多周期共振给予更高分数

4. **风险评分独立**
   - 增加风险评分维度
   - 高收益+低风险 = 最优交易机会

5. **回测验证**
   - 定期回测评分系统的准确性
   - 计算评分与实际收益的相关性

---

**文档版本**: v1.0  
**创建日期**: 2025-10-24  
**作者**: AI Trading System Team











